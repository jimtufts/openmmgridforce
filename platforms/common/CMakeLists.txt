SET(KERNELS_CPP ${CMAKE_CURRENT_BINARY_DIR}/src/CommonGridForceKernelSources.cpp)

ADD_CUSTOM_COMMAND(OUTPUT ${KERNELS_CPP}
    COMMAND ${CMAKE_COMMAND}
    ARGS -D INPUT_DIR=${CMAKE_CURRENT_SOURCE_DIR}/src -D OUTPUT_FILE=${KERNELS_CPP} -P "${CMAKE_CURRENT_SOURCE_DIR}/src/GenKernelSource.cmake"
    DEPENDS "${CMAKE_CURRENT_SOURCE_DIR}/src/GenKernelSource.cmake"
)
ADD_CUSTOM_TARGET(CommonKernels DEPENDS ${KERNELS_CPP})
